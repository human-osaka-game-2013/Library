# 2D3D対応自作ライブラリ

制作期間：約3ヵ月

制作時期：平成26年4月頃から

## ソースファイルなどについて
※担当箇所は教材や文献からの引用、参考をもありますが、ライブラリ構成などオブジェクトやデバイスの管理の考えなどは全て自作です。

### libraryディレクトリ(ライブラリ部分)
- Device.cpp  
主にデバイス初期化

- ViewManage.cpp  
描画制御

- Window.cpp  
ウインドウ生成

- KeyProcess.cpp、Joystick_XInput.cpp  
入力制御

- WinMain.cpp  
メインルーチンの制御

- SceneManage.cpp  
シーン管理

- RenderManage.h、graphic.h  
素材やモデルデータの管理

### srcディレクトリ(ゲームメイン部分)
「SceneManage.cpp」からシーンでの派生ルーチンなどは、このディレクトリ内にまとめています。

## 最も工夫した箇所
- AllocateHierarchy.cpp  
アニメーション付きメッシュデータの管理部分です。  
アニメーション付きのメッシュデータの管理はこのプロジェクトを作った時が初めてでした。メッシュデータやメッシュコンテナの破棄などがモデルによってはイレギュラーが発生したので、試行錯誤しきちんと破棄出来るようにしました。

- BattleObject.cpp、BattleObject.h  
ゲーム内(このソースではバトルシーン)でのオブジェクト情報の管理法にはかなり工夫しました。「[プラ箱戦記](https://github.com/human-osaka-game-2013/PlaBox_Wars)」ではモデルデータのあるクラスとプレイヤーなどのオブジェクトクラスを一緒にしていたのですが、オブジェクトの初期化の際にどのモデルデータを使うかを、ID（数値）として持たせることで、モデルデータとオブジェクトの分離化を図りました。

- Joystick_XInput.cpp  
「microsoft xbox 360 controller for windows」で4人分の入力を同時に取得を出来る用に実装しました。その御蔭で、このライブラリを使えば多人数参加型のゲームにも利用可能で制作の幅が広がります。

## この時の制作について
元々このライブラリはアニメーション付きモデルを使った3Dアクションゲームを作るつもりの物でした。  
最初はグラフィッカーの環境の問題でFBXファイルを使おうとしていたのですが、文献があまりにも無く、制作中にXファイルを使うしかないという事になりスタートが遅れた事を覚えています。  
アニメーションを動かす事も始めてだった為、勉強しながらゲームを作っていました。  
マスターの時点ではアニメーションさせるだけで精一杯でした。  
プログラマは私一人でしたが、とても悔しいと思い、この経験を次の制作に活かそうと決意しました。
